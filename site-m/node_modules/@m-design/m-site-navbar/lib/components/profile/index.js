"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// @ts-nocheck
var react_1 = __importDefault(require("react"));
var web_react_1 = require("@arco-design/web-react");
var icon_1 = require("@arco-design/web-react/icon");
var axios_1 = __importDefault(require("axios"));
var profile_module_less_1 = __importDefault(require("./profile.module.less"));
var locale_1 = __importDefault(require("../../locale"));
var config_1 = require("../../utils/config");
function getSuffix(path) {
    return path.split("/react/").pop();
}
axios_1.default.defaults.withCredentials = true;
function Profile(_a) {
    var lang = _a.lang, user = _a.user;
    var loginHref = (0, config_1.getLoginHref)();
    var handleLogout = function () {
        axios_1.default.post("/api/auth/logout");
        window.location.href = loginHref;
    };
    var t = locale_1.default[lang];
    return react_1.default.createElement("div", { className: profile_module_less_1.default.profile }, user
        ? react_1.default.createElement("div", { className: profile_module_less_1.default.head }, react_1.default.createElement(web_react_1.Avatar, { size: 36 }, user.username), react_1.default.createElement("div", { className: profile_module_less_1.default.info }, react_1.default.createElement(web_react_1.Typography.Text, { className: profile_module_less_1.default.nickname }, user.loginName), react_1.default.createElement(web_react_1.Typography.Text, { className: profile_module_less_1.default.email, type: "secondary" }, user.email)))
        : null, react_1.default.createElement("div", { className: profile_module_less_1.default.menu }, user
        ? react_1.default.createElement(react_1.default.Fragment, null)
        : loginHref
            ? react_1.default.createElement("a", { className: profile_module_less_1.default.item, href: loginHref, rel: "noreferrer" }, react_1.default.createElement(icon_1.IconImport, null), t.loginNow)
            : null, user
        ? react_1.default.createElement(react_1.default.Fragment, null, 
        // React.createElement(Divider, { className: styles.divider }),
        react_1.default.createElement("a", {
            className: profile_module_less_1.default.item,
            onClick: function () {
                return handleLogout();
            },
        }, react_1.default.createElement(icon_1.IconExport, null), t.logout))
        : null));
}
exports.default = Profile;
