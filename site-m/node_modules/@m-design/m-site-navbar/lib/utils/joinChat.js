"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var axios_1 = __importDefault(require("axios"));
var web_react_1 = require("@arco-design/web-react");
var config_1 = require("./config");
function joinChat(chatId, email) {
    if (!email) {
        web_react_1.Message.error({ content: '请先登陆' });
        return;
    }
    if (!chatId) {
        web_react_1.Message.error({ content: '请指定群聊 ID' });
        return;
    }
    axios_1.default
        .get("".concat(config_1.apiBasename, "/api/oncall/joinChat?email=").concat(email, "&chatId=").concat(chatId))
        .then(function (res) {
        if (res.data.status === 'success') {
            var aLink = document.createElement('a');
            aLink.href = "lark://client/chat/".concat(chatId);
            aLink.click();
        }
    })
        .catch(function (err) {
        console.error(err); // eslint-disable-line
        web_react_1.Message.error({ content: '未知错误，请重试！' });
    });
}
exports.default = joinChat;
