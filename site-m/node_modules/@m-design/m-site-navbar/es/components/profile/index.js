// @ts-nocheck
import React from "react";
import { Avatar, Typography, } from "@arco-design/web-react";
import { IconExport, IconImport, } from "@arco-design/web-react/icon";
import axios from "axios";
import styles from "./profile.module.less";
import locale from "../../locale";
import { getLoginHref, } from "../../utils/config";
function getSuffix(path) {
    return path.split("/react/").pop();
}
axios.defaults.withCredentials = true;
function Profile(_a) {
    var lang = _a.lang, user = _a.user;
    var loginHref = getLoginHref();
    var handleLogout = function () {
        axios.post("/api/auth/logout");
        window.location.href = loginHref;
    };
    var t = locale[lang];
    return React.createElement("div", { className: styles.profile }, user
        ? React.createElement("div", { className: styles.head }, React.createElement(Avatar, { size: 36 }, user.username), React.createElement("div", { className: styles.info }, React.createElement(Typography.Text, { className: styles.nickname }, user.loginName), React.createElement(Typography.Text, { className: styles.email, type: "secondary" }, user.email)))
        : null, React.createElement("div", { className: styles.menu }, user
        ? React.createElement(React.Fragment, null)
        : loginHref
            ? React.createElement("a", { className: styles.item, href: loginHref, rel: "noreferrer" }, React.createElement(IconImport, null), t.loginNow)
            : null, user
        ? React.createElement(React.Fragment, null, 
        // React.createElement(Divider, { className: styles.divider }),
        React.createElement("a", {
            className: styles.item,
            onClick: function () {
                return handleLogout();
            },
        }, React.createElement(IconExport, null), t.logout))
        : null));
}
export default Profile;
